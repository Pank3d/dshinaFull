"use client";
import React, { useEffect } from "react";
import style from "./ProductList.module.scss";
import { GoodsPriceRest } from "../../entities/markiAvto/api/types";
import { ProductCard } from "../ProductCard";
import { useProductsStore } from "../../entities/products";

export const ProductList = ({ data }: { data: GoodsPriceRest[] }) => {
  const { setProducts } = useProductsStore();

  useEffect(() => {
    if (data && data.length > 0) {
      setProducts(data);
    }
  }, [data, setProducts]);

  return (
    <main className={style.productMainWrapper}>
      {data.map((i) => {
        return <ProductCard dataItem={i} key={i.code} />;
      })}
    </main>
  );
};
